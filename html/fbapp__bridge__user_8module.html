<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>FBApp Bridge: fbapp_bridge_user.module File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FBApp Bridge
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Drupal module to create facebook applications in Drupal.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fbapp_bridge_user.module File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af8fe74a27e24e43a98d27372dc05b198"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#af8fe74a27e24e43a98d27372dc05b198">fbapp_bridge_user_boot</a> ()</td></tr>
<tr class="separator:af8fe74a27e24e43a98d27372dc05b198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a49409fd798e367f8d2c77b670838d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#af7a49409fd798e367f8d2c77b670838d">fbapp_bridge_user_menu</a> ()</td></tr>
<tr class="separator:af7a49409fd798e367f8d2c77b670838d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d0362d828e708151908c7ad7ef1f4a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a15d0362d828e708151908c7ad7ef1f4a">fbapp_bridge_user_user_load</a> ($users)</td></tr>
<tr class="separator:a15d0362d828e708151908c7ad7ef1f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33634ece528bcaf30f42853ab708f7a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a33634ece528bcaf30f42853ab708f7a9">fbapp_bridge_user_user_insert</a> (&amp;$edit, $account, $category)</td></tr>
<tr class="separator:a33634ece528bcaf30f42853ab708f7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e3eb47dc4d521d61d683babdc0c59c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#ac1e3eb47dc4d521d61d683babdc0c59c">fbapp_bridge_fbuser_logout</a> ()</td></tr>
<tr class="separator:ac1e3eb47dc4d521d61d683babdc0c59c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17fbb63c21cc7f95736766770124744a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a17fbb63c21cc7f95736766770124744a">fbapp_bridge_fbuser_access</a> ($action)</td></tr>
<tr class="separator:a17fbb63c21cc7f95736766770124744a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895f252ebb74953a204962df5f47c88d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a895f252ebb74953a204962df5f47c88d">fbapp_bridge_fbuser_authorized_app</a> ($fbapp_bridge_rec_id)</td></tr>
<tr class="separator:a895f252ebb74953a204962df5f47c88d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129017a9e7784f1a4237eba17c51fb1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a129017a9e7784f1a4237eba17c51fb1e">fbapp_bridge_fbuser_unauthorized_app</a> ($fbapp_bridge_rec_id)</td></tr>
<tr class="separator:a129017a9e7784f1a4237eba17c51fb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da9c1c8ed46d1e73acac4165503ffbd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a7da9c1c8ed46d1e73acac4165503ffbd">fbapp_bridge_init_fbuser</a> ($data)</td></tr>
<tr class="separator:a7da9c1c8ed46d1e73acac4165503ffbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8657cc38ffb6027df9ae938825a06ca7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a8657cc38ffb6027df9ae938825a06ca7">fbapp_bridge_fbuser_load</a> ($fbapp_bridge_rec_id, $fbid)</td></tr>
<tr class="separator:a8657cc38ffb6027df9ae938825a06ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cbb6e801ee8a3975e64178256eba8db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a6cbb6e801ee8a3975e64178256eba8db">fbapp_bridge_fbuser_load_by_uid</a> ($fbapp_bridge_rec_id, $uid)</td></tr>
<tr class="separator:a6cbb6e801ee8a3975e64178256eba8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569e03e75cc6cd1149c045980b7fe625"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a569e03e75cc6cd1149c045980b7fe625">fbapp_bridge_fbuser_reassign_roles</a> ()</td></tr>
<tr class="separator:a569e03e75cc6cd1149c045980b7fe625"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a842f969b736ea6c8ab9e964955ff300e"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fbapp__bridge__user_8module.html#a842f969b736ea6c8ab9e964955ff300e">FBAPP_BRIDGE_USERS_TBL</a> 'fbapp_bridge_users'</td></tr>
<tr class="separator:a842f969b736ea6c8ab9e964955ff300e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a17fbb63c21cc7f95736766770124744a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_access </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>boolean $flag Whether the user is a facebook user or not. true if the user is a facebook user. </dd></dl>

</div>
</div>
<a class="anchor" id="a895f252ebb74953a204962df5f47c88d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_authorized_app </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fbapp_bridge_rec_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the corresponding user role in the database </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Set has_authorized_app column value to 1. </dd></dl>

</div>
</div>
<a class="anchor" id="a8657cc38ffb6027df9ae938825a06ca7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_load </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fbapp_bridge_rec_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fbid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$fbapp_bridge_rec_id</td><td>DB record ID. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fbid</td><td>Facebook ID of the user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array/bool $app_rec An associate containing details about the application. FALSE otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a6cbb6e801ee8a3975e64178256eba8db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_load_by_uid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fbapp_bridge_rec_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads application data by user id. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$fbapp_bridge_rec_id</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$uid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array $app_rec FALSE is no $app_rec is found. </dd></dl>

</div>
</div>
<a class="anchor" id="ac1e3eb47dc4d521d61d683babdc0c59c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_logout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handler for URL: "fbapp-bridge-user/logout" Takes care of logging user out of the application. </p>

</div>
</div>
<a class="anchor" id="a569e03e75cc6cd1149c045980b7fe625"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_reassign_roles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Re-assigns roles to a user. This is required when the user has given permission to an app on a drupal instance, but has not give permission to another app on the same drupal instance. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="fbapp__bridge__user_8module.html#af8fe74a27e24e43a98d27372dc05b198">fbapp_bridge_user_boot()</a> </dd>
<dd>
<a class="el" href="fbapp__bridge_8module.html#a0d84538bca302be21d4cbf2769a13030">is_fbapp_bridge_app_launch_page()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a129017a9e7784f1a4237eba17c51fb1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_fbuser_unauthorized_app </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fbapp_bridge_rec_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the anonymous Role when user unauthorizes the app. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$fbapp_bridge_rec_id</td><td>primary id of the FBAPP_BRIDGE table </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>Set has_authorized_app column to 0. </dd></dl>

</div>
</div>
<a class="anchor" id="a7da9c1c8ed46d1e73acac4165503ffbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_init_fbuser </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements custom hook, hook_init_fbuser(). </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd><p class="startdd">Return the fbuser data specific to fbapp_bridge to the function invoking the hook. Also, return the login/logout URL. Check whether user has authorized the facebook app. Check whether user has authorized the facebook app. If yes, else assign the unauthorized_rid. </p>
<p class="enddd">The following details should be captured on facebook app configuration page. You might want to redirect the user to fb login, if not logged in to facebook. You might want to do nothing, if the fbuser is not logged in to facebook. </p><dl class="section return"><dt>Returns</dt><dd>array $module_data Contents of the array. (string $fbuser_login_url, string fbuser_fbid, boolean fbuser_has_authorized_app). </dd></dl>
</dd></dl>

</div>
</div>
<a class="anchor" id="af8fe74a27e24e43a98d27372dc05b198"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_user_boot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements hook_boot(). Assigning roles to the logged in drupal user. Note: Be watchful when managing roles for multiple facebook apps on the same drupal instance.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="fbapp__bridge__user_8module.html#a569e03e75cc6cd1149c045980b7fe625">fbapp_bridge_fbuser_reassign_roles()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af7a49409fd798e367f8d2c77b670838d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_user_menu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements hook_menu(). </p>

</div>
</div>
<a class="anchor" id="a33634ece528bcaf30f42853ab708f7a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_user_user_insert </td>
          <td>(</td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$edit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$account</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements hook_user_insert(). Inserts a record in FBAPP_BRIDGE_USERS_TBL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">&amp;$edit</td><td></td></tr>
    <tr><td class="paramtype">object</td><td class="paramname">$account</td><td></td></tr>
    <tr><td class="paramtype">object</td><td class="paramname">$category</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="fbapp__bridge_8module.html#a0d84538bca302be21d4cbf2769a13030">is_fbapp_bridge_app_launch_page()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a15d0362d828e708151908c7ad7ef1f4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fbapp_bridge_user_user_load </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$users</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements hook_user_load(). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$users</td><td>Associative array with keys as uid and values as objects. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a842f969b736ea6c8ab9e964955ff300e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const FBAPP_BRIDGE_USERS_TBL 'fbapp_bridge_users'</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Find out how to assign roles to users dynamically based on the facebook app he/she is currently accessing. Updating "users_roles" is not the solution. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 25 2014 00:21:58 for FBApp Bridge by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
